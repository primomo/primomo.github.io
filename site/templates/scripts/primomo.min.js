function primomoController(e,r,t,a,n){function d(r){if(e.handEnd=0,deckArray[0].active=!1,deckArray[1].active=!1,deckArray[0].cardAnimation="",deckArray[1].cardAnimation="",e.cards=[],c==e.totalCards&&(e.roundDisplay="firstround"),2==c&&(e.roundDisplay="finalround"),c>=2){deckArray=shuffle(deckArray,c);var t=[];t.push(deckArray[0]),t.push(deckArray[1]),deckArray[0].active=!0,deckArray[0].gamePlays+=1,deckArray[1].active=!0,deckArray[1].gamePlays+=1,t[0].cardSide="left",t[0].cardAnimation="animated bounceInUp",t[1].cardSide="right",t[1].cardAnimation="animated bounceInUp",e.cards=t,e.deckArray=deckArray,c--}else if(1==c){e.message=deckArray[0].name,e.messageAnimation="animated bounceInLeft",deckArray=updateTable(deckArray),"left"==r&&(deckArray[0].winner="winner"),"right"==r&&(deckArray[0].winner="winner");var d=e.deckArray,o=e.pageId,i=a({method:"post",url:"/site/templates/stats-update.php/",data:{stats:d,pageid:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}});e.trackGamePlayed=function(){n.ga&&n.ga("send",{hitType:"event",eventCategory:"Game",eventAction:"played",eventLabel:e.gameArray[0].title})},e.trackGamePlayed(),e.roundDisplay="game-over",e.handEnd=1;var t=[];t.push(deckArray[0]),t.push(deckArray[1]),t[1]={},t[0].cardSide="right",t[0].cardAnimation="animated bounceInRight",t[1].cardSide="left hidden",e.cards=t,e.deckArray=deckArray,e.deckArrayTable=deckArray,c--}}function o(r){"left"==r&&(deckArray[0].gameWins+=1,deckArray[1].discarded=!0,arraymove(deckArray,1,e.totalCards-1)),"right"==r&&(deckArray[1].gameWins+=1,deckArray[0].discarded=!0,arraymove(deckArray,0,e.totalCards-1))}function i(r){"left"==r?e.deckArray[1].discarded=!0:e.deckArray[0].discarded=!0,e.deckArray[0].active=!1,e.deckArray[1].active=!1,c<e.totalCards&&c>2&&(e.roundDisplay="midround"),1==c&&(e.roundDisplay="finalroundover"),setTimeout(function(){e.cards=[],e.$digest(),o(r),d(r),e.$digest()},750)}if("undefined"!=typeof e.deckArray){e.handEnd=0,deckArray=e.deckArray,e.deckArrayTable=angular.copy(deckArray),e.totalCards=deckArray.length;var c=e.totalCards;e.graphCardWidth=100/deckArray.length,deckArray=shuffle(deckArray,c),deckArray=numberCards(deckArray,c),d()}e.throwoutleft=function(r,t,a){if(1!=e.handEnd){if(e.handEnd=1,"left"==a.cardSide){var n="LEFT",d="right";e.cards[1].cardAnimation="animated bounceOutDown"}else{var n="RIGHT",d="left";e.cards[0].cardAnimation="animated bounceOutDown"}i(d)}},e.throwoutright=function(r,t,a){if(1!=e.handEnd){if(e.handEnd=1,"left"==a.cardSide){var n="left";e.cards[1].cardAnimation="animated bounceOutUp"}else{var n="right";e.cards[0].cardAnimation="animated bounceOutUp"}var d=n;i(d)}},e.cardclick=function(r,t){if("click"!=r.type||0!=e.clickProtect){if(e.cards[0].flipped===!0||e.cards[1].flipped===!0)return e.cards[0].flipped=!1,void(e.cards[1].flipped=!1);if(1!=e.handEnd){if(e.handEnd=1,"left"==t.cardSide){var a="left";e.cards[1].cardAnimation="animated bounceOutUp"}else{var a="right";e.cards[0].cardAnimation="animated bounceOutUp"}t.cardAnimation="animated bounceOutDown";var n=a;i(n)}}},e.dragstart=function(r,t,a){e.clickProtect=1},e.dragmove=function(r,t,a){e.cards[0].flipped=!1,e.cards[1].flipped=!1,a.cardAnimation="",e.clickProtect=0,throwOutConfidenceElements={},throwOutConfidenceElements.yes=t.target.querySelector(".yes").style,throwOutConfidenceElements.no=t.target.querySelector(".no").style,throwOutConfidenceElements[t.throwDirection==gajus.Swing.Card.DIRECTION_DOWN?"yes":"no"].opacity=t.throwOutConfidence,throwOutConfidenceElements[t.throwDirection==gajus.Swing.Card.DIRECTION_DOWN?"no":"yes"].opacity=0,"left"==a.cardSide&&(otherCardObject=t.target.nextElementSibling),"right"==a.cardSide&&(otherCardObject=t.target.previousElementSibling),throwOutConfidenceElementsOther={},throwOutConfidenceElementsOther.no=otherCardObject.querySelector(".yes").style,throwOutConfidenceElementsOther.yes=otherCardObject.querySelector(".no").style,t.target.style.zIndex=99999,otherCardObject.style.zIndex=77777,otherCardObject.style.pointerEvents="none",e.$digest()},e.dragend=function(r,t,a){e.clickProtect=0,throwOutConfidenceElements={},1!=t.throwOutConfidence&&(throwOutConfidenceElements.yes=t.target.querySelector(".yes").style,throwOutConfidenceElements.no=t.target.querySelector(".no").style,throwOutConfidenceElements.yes.opacity=0,throwOutConfidenceElements.no.opacity=0,"left"==a.cardSide&&(otherCardObject=t.target.nextElementSibling),"right"==a.cardSide&&(otherCardObject=t.target.previousElementSibling),throwOutConfidenceElementsOther={},throwOutConfidenceElementsOther.no=otherCardObject.querySelector(".yes").style,throwOutConfidenceElementsOther.yes=otherCardObject.querySelector(".no").style,throwOutConfidenceElementsOther.yes.opacity=0,throwOutConfidenceElementsOther.no.opacity=0,otherCardObject.style.pointerEvents="auto",e.$digest())},e.cardInfo=function(r,t){"click"==r.type&&0==e.clickProtect||(t.flipped===!0?t.flipped=!1:t.flipped=!0)}}function updateTable(e){for(var r=e.length;0!==r;)r-=1,e[r].wins=e[r].wins+e[r].gameWins,e[r].plays=e[r].plays+e[r].gamePlays;return e}function numberCards(e){for(var r=e.length;0!==r;)r-=1,e[r].number=r;return e}function shuffle(e,r){for(var t=r,a,n;0!==t;)n=Math.floor(Math.random()*t),t-=1,a=e[t],e[t]=e[n],e[n]=a;return e}function arraymove(e,r,t){var a=e[r];e.splice(r,1),e.splice(t,0,a)}function ModalCtrl(e,r,t){e.modalTemplate="",e.open=function(){var t=r.open({template:e.modalTemplate,windowClass:"small"})}}angular.module("primomoApp",["mm.foundation","directive.equalizer","gajus.swing","ngTouch","ngFitText"]),primomoController.$inject=["$scope","$element","$attrs","$http","$window"],angular.module("primomoApp").controller("primomoController",primomoController),ModalCtrl.$inject=["$scope","$modal","$log"],angular.module("primomoApp").controller("ModalCtrl",ModalCtrl);
//# sourceMappingURL=./primomo.min.js.map